const Utils = require('../utils');

describe('Login Screen Tests', () => {
  beforeEach(async () => {
    await Utils.reloadApp();
  });

  it('should show an alert on log in failure', async () => {
    await Utils.navigateToLoginScreen();
    await element(by.id('loginScreenUsername')).replaceText('invalid');
    await element(by.id('loginScreenPassword')).replaceText('invalid');
    await Utils.closeKeyboard('loginScreen');
    await element(by.id('loginScreenLoginButton')).tap();
    await expect(element(by.label('Bad credentials'))).toBeVisible();
  });

  it('should log in as user successfully', async () => {
    await Utils.loginAsUser();
    await Utils.tapFirstElementByLabel('Menu Button');
    await expect(element(by.label('Logout'))).toExist();
  });

  it('should log out successfully', async () => {
    await Utils.tapFirstElementByLabel('Menu Button');
    await Utils.tapFirstElementByLabel('Logout');
    await expect(element(by.label('Login'))).toExist();
  });
});
