const Utils = require('../utils');

describe('Login Screen Tests', () => {
  beforeEach(async () => {
    await Utils.reloadApp();
  });

  it('should show an alert on log in failure', async () => {
    await Utils.navigateToLoginScreen();
    await element(by.id('loginScreenUsername')).replaceText('invalid');
    await element(by.id('loginScreenPassword')).replaceText('invalid');
    await element(by.id('loginScreenLoginButton')).tap();
    const expectedLabel = 'Bad credentials';
    await Utils.waitForElementToBeVisibleByLabel(expectedLabel);
    await expect(element(by.label(expectedLabel))).toBeVisible();
  });

  it('should log in and log out as user successfully', async () => {
    await Utils.loginAsUser();
    await Utils.tapFirstElementByLabel('Menu Button');
    await expect(element(by.label('Logout'))).toExist();
    await Utils.tapFirstElementByLabel('Logout');
    await expect(element(by.label('Login'))).toExist();
  });
});
